var B=Object.defineProperty,N=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var h=(a,e,t)=>e in a?B(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,L=(a,e)=>{for(var t in e||(e={}))D.call(e,t)&&h(a,t,e[t]);if(g)for(var t of g(e))$.call(e,t)&&h(a,t,e[t]);return a},k=(a,e)=>N(a,w(e));import{r as y,a as x,o as l,c as f,b as u,u as i,w as I,v as A,F as S,d as E,t as M,n as P,l as T,C as U,D as V,E as F,G as O,f as R,H as j,p as v,m as C,k as z,i as G}from"./index.cd94e2b3.js";import{a as H,S as Y,u as q,N as b}from"./index.39724229.js";var J="/Taiwan_Bike_Map/assets/StionSearch.2427a6e1.svg",K="/Taiwan_Bike_Map/assets/citySearch_banner.62fc8d8a.jpg";const Q=["src"],W={class:"flex items-center space-x-5"},X=u("option",{value:"",disabled:""},"\u8ACB\u9078\u64C7\u7E23\u5E02",-1),Z=["value"],tt=["src"],et={emits:["updateCity"],setup(a,{emit:e}){const t=y(""),r=x(H),d=()=>{!t.value||e("updateCity",t.value)};return(p,o)=>(l(),f("div",{class:"mt-16 w-full h-80vh bg-cover bg-center flex flex-col items-center justify-center",style:P(`background-image: url(${i(K)})`)},[u("img",{class:"mb-4",src:i(J),alt:"stionSearch",width:"328"},null,8,Q),u("div",W,[I(u("select",{class:"py-3 w-28 rounded-lg text-center text-content",name:"city",id:"city","onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),"data-test":"city"},[X,(l(!0),f(S,null,E(i(r),s=>(l(),f("option",{key:s.value,value:s.value},M(s.option),9,Z))),128))],512),[[A,t.value]]),u("button",{type:"button",onClick:d,"data-test":"submit"},[u("img",{class:"w-10 h-10",src:i(Y),alt:"search icon"},null,8,tt)])])],4))}},st={setup(a,{expose:e}){const t=y(!0),r=x({list:[]}),d=async o=>{t.value=!0;try{const[s,n]=await Promise.all([V(o),F(o)]);p({stationResult:s,availableResult:n}),t.value=!1}catch(s){console.log("Error",s)}},p=({stationResult:o,availableResult:s})=>{r.list=s.map((n,c)=>{o.forEach(_=>{_.StationID===n.StationID&&(n.StationName=_.StationName,n.StationAddress=_.StationAddress,n.StationPosition=_.StationPosition)});const m=c===0;return k(L({},n),{isActive:m})})};return e({getStationInfo:d}),(o,s)=>(l(),T(U,{isLoading:t.value,stationInfoList:i(r).list,"onUpdate:stationInfoList":s[0]||(s[0]=n=>i(r).list=n),stationInfoListModifiers:{sync:!0}},null,8,["isLoading","stationInfoList"]))}},it={setup(a){let e;const t=y(""),r=y(null),{scenicSpot:d,restaurant:p,isTourismDataReady:o,fetchTourismData:s}=q();O();const n=c=>{t.value=c,z(()=>{r.value.getStationInfo(c)}),s({city:c,spatialFilter:null})};return R(()=>{const{proxy:c}=G();e=c,e.$eventBus.$on("fetchNearbyTourism",m=>{s({city:t.value,spatialFilter:m})})}),j(()=>{e.$eventBus.$off("fetchNearbyTourism")}),(c,m)=>(l(),f(S,null,[v(et,{onUpdateCity:n}),t.value?(l(),T(st,{key:0,ref_key:"refCityStation",ref:r,city:t.value},null,8,["city"])):C("",!0),i(o)?(l(),f(S,{key:1},[v(b,{title:"\u9644\u8FD1\u666F\u9EDE",tourismList:i(d).list},null,8,["tourismList"]),v(b,{title:"\u9644\u8FD1\u7F8E\u98DF",tourismList:i(p).list},null,8,["tourismList"])],64)):C("",!0)],64))}};export{it as default};
