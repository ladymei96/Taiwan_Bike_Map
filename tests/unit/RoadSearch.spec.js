import { describe, it, expect, vi } from 'vitest';
import { mount } from '@vue/test-utils';
import RoadSearch from 'src/components/RoadNav/RoadSearch.vue';
import tdxService from '../../src/api/__mocks__/tdxService';
const mockRoadData = [
  {
    RouteName: '北寧路自行車道',
    AuthorityName: '海科館',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '中正區',
    RoadSectionStart: '八斗子公園',
    RoadSectionEnd: '平浪橋',
    Direction: '雙向',
    CyclingLength: 1000.0,
    FinishedTime: '1050601',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.802056935341 25.1421325173852,121.802154526427 25.1422525621511,121.802493612695 25.1425165264836,121.802976550059 25.1430886541818,121.803054838637 25.1434884881812,121.80311257542 25.1438257817298,121.803145744199 25.1439930465128,121.803165413379 25.1441024902429,121.8032269283 25.144263805563,121.803327338599 25.1443534922954,121.803749122201 25.1446058739486,121.804068985326 25.1448679706783,121.80441502791 25.145145912456,121.804461263431 25.1452651601528,121.804624920065 25.14558294672,121.804877252568 25.1458278767349,121.805147979101 25.1462353300645,121.805183305714 25.146558616117))'
  },
  {
    RouteName: '台2丙線自行車道',
    AuthorityName: '公路總局第一區養護工程處-基隆工務段',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '暖暖區',
    RoadSectionStart: '台2丙2.5K',
    RoadSectionEnd: '台2丙7.6K',
    Direction: '雙向',
    CyclingLength: 5100.0,
    FinishedTime: '1041110',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.772127001553 25.0545080036533,121.771574004211 25.0557249975545,121.758048999639 25.0746570033015,121.757882003968 25.0749479999458,121.75785100074 25.0751319999937,121.757868004461 25.0753419986832,121.757926998507 25.0755490023975,121.75802000478 25.0757210032049,121.758125000992 25.07591000521,121.758161995208 25.0760470024007,121.758138997511 25.0762030025518,121.758082998948 25.0763199997146,121.757977999878 25.0764219991792,121.757839995836 25.0764940052805,121.757741003864 25.0765220002784,121.757599997708 25.0765250041051,121.757463997308 25.076499003076,121.757333995105 25.0764200053249,121.757255004909 25.0763430041518,121.757206999753 25.0762690045885,121.757161995448 25.0761720049681,121.757072004227 25.0758470034466,121.75701900397 25.0757359973273,121.75694499777 25.0756360038726,121.756827002074 25.0755540013584,121.756713997628 25.0755179969378,121.756592001957 25.0754979993816,121.756473998396 25.0755050015338,121.75635500327 25.0755409968574,121.756253000023 25.0756079971995,121.756162996505 25.0757049988602,121.756115002092 25.075794004524,121.756087001515 25.0759169972356,121.756087000973 25.0760880015066,121.756087000096 25.0762880030139,121.75607800389 25.0763920037588,121.756035999763 25.07652999974,121.755968000698 25.0766350051762,121.755901001555 25.0767139964479,121.755796004531 25.0767860040984,121.755671997536 25.0768600042974,121.755548004049 25.0768910049966,121.755118997571 25.0769470028427,121.754230002006 25.077253998947,121.754086002454 25.0773640029338,121.75397599749 25.0775120035677,121.75391399995 25.0776779963957,121.753901999609 25.0778340032924,121.753925001134 25.0779820053018,121.754037997205 25.0782640008908,121.754068997218 25.0783939969402,121.754068996751 25.0785249991003,121.75402699844 25.0786450021278,121.753952995619 25.0787850017682,121.753799998637 25.0789250053823,121.753639004954 25.0790380022122,121.75342799536 25.079149997925,121.753223999919 25.0792289973091,121.752933998531 25.0793010029034,121.752515996174 25.0793620021407,121.752312999168 25.0794180014586,121.752144004337 25.0794970025073,121.7518979961 25.0797040012908,121.751761998273 25.0799580008355,121.751697003769 25.0801290003058,121.751584998492 25.0803610038443,121.751170998691 25.0809989989392,121.751057996425 25.0816169990383,121.750854997341 25.0818830007284,121.75018900293 25.082087002363,121.749928997391 25.0823230027697,121.749702998816 25.082936002706,121.749421003105 25.0831410035966,121.749081997687 25.0833250042365,121.748370004625 25.0835500029823,121.748088000658 25.0838260049551,121.747964002853 25.0841840038784,121.748201003678 25.0846549982929,121.74847199835 25.0852270041897,121.748551003615 25.0858099989814,121.74847200441 25.0860559982768,121.748177999942 25.0863010053931,121.747310997879 25.0863520029529,121.746903999555 25.0863929980414,121.746237997997 25.0861889988065,121.745798000452 25.0858410051174,121.745583000565 25.0857900042764,121.745401997057 25.0858099983811))'
  },
  {
    RouteName: '基隆市自行車道濱海支線路網',
    AuthorityName: '觀光及城市行銷處、工務處養護工程科、產業發展處',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '中正區',
    RoadSectionStart: '中正里基隆二信旁巷弄',
    RoadSectionEnd: '潮境公園',
    Direction: '雙向',
    CyclingLength: 6000.0,
    FinishedTime: '1060827',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.789067003092 25.1443269990558,121.789817995325 25.1435240041386,121.789933003409 25.1434239964128,121.790014003779 25.1434149972148,121.790408995933 25.1436529987485,121.790483000262 25.143668005045,121.79062699693 25.1436309995732,121.791116999755 25.143078996587,121.791812997614 25.1422930047122,121.79296700005 25.1409430026062,121.793551998104 25.1402599975608,121.79369900153 25.1401550038611,121.793780003678 25.1401619996405,121.79384000438 25.1401880027905,121.795040004836 25.1410160028793,121.79515799898 25.1411070002751,121.795319998338 25.1412440009681,121.795449004819 25.1413599997601,121.7955289965 25.1415170034346,121.795790003953 25.1434619988684,121.795798999963 25.143663998327,121.795659999383 25.1438349973946,121.795260002176 25.1442910012838,121.794324003703 25.1453699974653,121.793879997349 25.1458699997524),(121.784115002607 25.1488570045438,121.784173002472 25.148761997351,121.784166001739 25.1486210043432,121.784147998753 25.1470640000087,121.784196998985 25.1469980011767,121.785068996279 25.1464579967034,121.785059001605 25.1463840048131,121.784846999429 25.1461259983222,121.784848003146 25.1460099965991,121.784900000748 25.1459460038546,121.78644500009 25.1449770043903,121.786598999261 25.1448629979183,121.786597003432 25.1447929990196,121.786483998292 25.1446970030931,121.786324002472 25.1445189964855,121.78636099683 25.1444680014633,121.786475999681 25.1443960001932,121.786758998097 25.1442430042564,121.786780996037 25.1442259966694,121.787011002645 25.1441550000798,121.787270001791 25.1440859976401,121.7874669982 25.1440469982799,121.787803998207 25.1441969974873,121.788668999669 25.1445679994068,121.788777995803 25.144576997405,121.788903001714 25.1445199991421,121.789074997493 25.1443240044279),(121.778692995835 25.1508749996232,121.779285999271 25.1506969967336,121.779886999167 25.1505679966759,121.78042199682 25.150376003931,121.78092800073 25.1501730039687,121.781586000078 25.1498950019496,121.782032997454 25.1496159988326,121.782187996181 25.1495669997302,121.78272099751 25.1495359995889,121.783656004723 25.1494890045848,121.783844002503 25.1494030053471,121.783870001686 25.1492699986865,121.78389699939 25.1491069968561,121.78390999972 25.148956003666,121.784107995228 25.1488500000676),(121.773309001894 25.1551460053397,121.773483999165 25.1547260001034,121.775191999354 25.1510999996955,121.775281996854 25.1509850036252,121.775424995235 25.1509370041953,121.775639999151 25.1509419991153,121.776012001724 25.1510520025291,121.776109003806 25.1511570005781,121.776278998805 25.1512639992918,121.776543996894 25.1513700031865,121.776718996577 25.151412003034,121.776729996149 25.1514119995129,121.776961003875 25.151412999586,121.777169997339 25.1513850006023,121.777362003147 25.1513230020309,121.777608003763 25.151253001075,121.778088998584 25.1511230042604,121.778488001669 25.1510110047304,121.778600001226 25.1509469966496,121.778688998725 25.1508750025834),(121.769124002009 25.1534239970393,121.769218002091 25.1535079988131,121.76916300031 25.1535739969179,121.769095998527 25.1536450044876,121.768740004432 25.1543030021592,121.768755997632 25.1543290000831,121.768829998865 25.1544030039351,121.768871002436 25.1544329976452,121.769416995163 25.1550269992812,121.770040002747 25.1556810024372,121.770194000701 25.1558450016619,121.770789997998 25.1563870002392,121.770934999499 25.1564560021948,121.771030000227 25.1565139978291,121.771439998527 25.1566859971332,121.771763002631 25.1568160006162,121.772017995349 25.1569289977755,121.772282995077 25.1570370041633,121.772428999161 25.1570980008806,121.772507999923 25.1570989970809,121.772632000582 25.1570759976387,121.772723000794 25.1569900037406,121.772860001672 25.1566280016605,121.773300996407 25.1551600039144),(121.802094002576 25.1421969997396,121.802285004032 25.1423299988397,121.802488002478 25.1424260006214,121.802707004574 25.1426669985911,121.802988997868 25.1430600052058,121.803030003084 25.1431760047428,121.80314900257 25.1437649997631,121.803229996175 25.1441370048005,121.803281003312 25.1442899994255,121.803348002052 25.1443360020359,121.803541999032 25.1444350031204,121.803775004223 25.1445719972397,121.804072001187 25.1448030004771,121.804488997417 25.1451279971375,121.804702997078 25.1452990007464,121.804858004359 25.1454259989028,121.80490799849 25.1455299964066,121.805131001252 25.1462219982606,121.80524300371 25.146518001276),(121.79368600174 25.1401629997861,121.794134003459 25.1397469970489,121.79428099771 25.1396990034459,121.794429995874 25.1397400025977,121.794559998745 25.1398049996731,121.794873998782 25.1397929967108,121.795396004025 25.1397159968268,121.795648004685 25.139639000981,121.795913004823 25.1396550009445,121.796153002695 25.1397260048617,121.796433998549 25.1397799965621,121.796684000824 25.1398750045152,121.796863996706 25.1400160053163,121.797000003403 25.1401179993457,121.797145002065 25.1401660046538,121.797328001269 25.1401310037053,121.797540003331 25.1400599976084,121.797818997722 25.1399919977763,121.798234998357 25.1400210016563,121.799328995948 25.1400339980587,121.799645002308 25.1401259997262,121.799916001032 25.1402770046754,121.800018998921 25.1403719971196,121.799990997355 25.140661998942,121.800026999279 25.1407549969119,121.800160004048 25.1407900009937,121.800337003104 25.1407550016532,121.800605998317 25.1407110009355,121.801082995574 25.1408100014823,121.801305000428 25.140971000531,121.801529996755 25.1412240018077,121.801659000988 25.1413570031686,121.801799003929 25.1415339997738,121.801977002009 25.1418780005231,121.802093999207 25.1421980018259),(121.765715003127 25.150761001311,121.765643999935 25.1509840000173,121.766634995835 25.1512670010608,121.76649100155 25.1516230035716,121.766992998728 25.1517930048536,121.767475998669 25.1526520048456,121.767596004344 25.1528359988724,121.767640001044 25.1528610031821,121.767731002635 25.1528750028246,121.767839998747 25.1528830050158,121.768375002944 25.1528520006708,121.769770003471 25.1521639976205,121.769899995432 25.1522050026809,121.769951004947 25.1522490001802,121.770073997181 25.1524200038544,121.770183004288 25.1525720046743,121.769888002731 25.1528259973999,121.769679004746 25.1530010018508,121.769264004198 25.1533070024793,121.769121003971 25.1534219994384))'
  },
  {
    RouteName: '基隆市自行車道濱海環台路網串聯工程',
    AuthorityName: '交通處交通工程科',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '中正區、中山區、仁愛區、暖暖區',
    RoadSectionStart: '八斗子火車站、湖海路一段和協和街交叉口',
    RoadSectionEnd: '興隆街',
    Direction: '雙向',
    CyclingLength: 22300.0,
    FinishedTime: '1050102',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.742236000987 25.1304299969885,121.742378998777 25.1304820026875,121.742522002689 25.1305350012662,121.742634002085 25.1306020036258,121.742708998434 25.1306750052152,121.742740997445 25.130708996763,121.74281600334 25.1307769968817,121.742901001499 25.1308640044172,121.743067002043 25.1311020008675,121.743326002542 25.1314609988094,121.743476999742 25.1316350001864,121.743648002132 25.1315670029003,121.744035995912 25.1321340010936,121.745200001006 25.1338009994183,121.745762000512 25.1346969996368,121.746518002751 25.1359230036318,121.746770001001 25.1362720004382,121.746929997715 25.13638300232,121.747449002397 25.1366440035768,121.747912003134 25.1368850003843,121.748084997044 25.1369380044838,121.748308003543 25.13698599819,121.748683998432 25.1372020008326,121.749352000018 25.1375330015523,121.750780995352 25.1383239980201,121.751718996144 25.1388839975891,121.752482998839 25.1392930016632,121.752649002528 25.1393810001503,121.752835002394 25.1393609976292,121.753008998564 25.1392789993965,121.753212003248 25.1391969979323,121.753376999331 25.1391870049158,121.753678997421 25.1392160006583,121.754087001684 25.1393560026535,121.754403998955 25.1394630012222,121.754762998738 25.1396459970456,121.755028997002 25.1398410033762,121.755231998397 25.1400600010089,121.755438003817 25.1402899968288,121.755552999144 25.1404190031439,121.755787995252 25.1405249994883,121.756000002725 25.14063100443,121.75629100021 25.140688000677,121.7565089963 25.1407550017004,121.756715997131 25.1408369994113,121.756839003924 25.140855997295,121.757026004248 25.1408419968269,121.757640998276 25.1406460031873,121.757934001821 25.1405699988345,121.758186003791 25.1405739996145,121.758349999605 25.1406169987688,121.758662999257 25.1408030009351,121.759357997358 25.1412790007601,121.759578999203 25.1414130034501,121.759857001004 25.1415489974586,121.76024100017 25.141718002977,121.76047600018 25.141838002714,121.760588002199 25.1418909980892,121.76066299992 25.1420270034873,121.760796000449 25.1422980000533,121.761021998455 25.1427190014461,121.761269996956 25.1431130049074,121.761553995559 25.1435720027943,121.761652997402 25.1438199991571,121.761752000515 25.1441720034948,121.761787996014 25.1445880040977,121.761798001279 25.1449520034007,121.76165000346 25.1460879967726,121.761655999816 25.1463670028614,121.761676003542 25.146712001555,121.761759995472 25.1471889990511,121.761911004532 25.1477010041761,121.762005995326 25.1479779996074,121.762086003777 25.1481390030532,121.762278001011 25.1483290048514,121.762445998189 25.1484570013824,121.762661002177 25.1485090043531,121.762824000244 25.148513996859,121.762976000814 25.1484810031624,121.763191000222 25.1484190037521,121.763432998512 25.1484290051201,121.763444002889 25.1484330018313,121.763681004952 25.1484960030082,121.76369699961 25.1485050023917,121.763916000474 25.1486700005183,121.764150003689 25.1488469999503,121.764392001174 25.149086005015,121.764470001899 25.1492679977781,121.764561996715 25.1494960045799,121.764730001339 25.1498409968121,121.76487700054 25.1500270024486,121.765274002157 25.1503129979436,121.765942996327 25.1507130048507,121.766593001504 25.1509479996968,121.767205996624 25.1511279971621,121.767419003952 25.1512070052104,121.767426000565 25.1512140015175,121.76751400239 25.1513480037272,121.768071996938 25.1522860025001,121.768175995169 25.1524399988586,121.768264999586 25.1525200008433,121.768404004817 25.1525399981993,121.768684996634 25.1524589971754,121.769389004198 25.1521579969609,121.769975997632 25.1519309968374,121.770664001005 25.1516679991123,121.771293003009 25.1514250038962,121.771664998187 25.1512440022766,121.771910999395 25.1511310028956,121.772067001134 25.1510560003364,121.772196001594 25.1510009992759,121.772432999432 25.1510020022798,121.772752000185 25.1510120019574,121.773181995281 25.1510640050628,121.773970998699 25.1510310044486,121.77451300419 25.1509370006035,121.775076002064 25.150923998527,121.775722002856 25.1509259969065,121.776053995605 25.1510550053682,121.776412004737 25.151219996376,121.776763003828 25.1513100033668,121.777126995797 25.1512839990442,121.777586998852 25.1511719977972,121.779624003777 25.1506149980758,121.780909003359 25.150120996477,121.781450004759 25.1498739989948,121.781973002428 25.149557003872,121.782453996182 25.1492560001669,121.782647000532 25.1488990017569,121.783183002708 25.1480970039697,121.783440996566 25.1473499999938,121.783600998558 25.1466390017173,121.783755002248 25.1460279982722,121.783959998445 25.1457610036964,121.784416001966 25.1454620038497,121.786661996265 25.1440550038216,121.786996999284 25.1439200032493,121.787494997273 25.1437890014405,121.788011002525 25.1436190020053,121.788382996525 25.1434299967197,121.788905004013 25.1430369971734,121.789169995533 25.1427930035432,121.789895000042 25.1422530050122,121.790358003359 25.1419779996077,121.790879001874 25.1417889966127,121.791533997694 25.141511003505,121.792024996725 25.1412889982416,121.79219100217 25.1411589971121,121.792362004751 25.1409090005569,121.792466002108 25.1405190002475,121.792655996288 25.1399850000348,121.792801998694 25.1398140023449,121.793141002975 25.1396580045187,121.793457003383 25.1395980028373,121.793834000263 25.1396230030676,121.794456001108 25.1396820049128,121.794904995197 25.1397140009329,121.795272996428 25.139722001544,121.795818998347 25.13966900228,121.795834003531 25.1396690029262,121.79611200101 25.1397209981831,121.796127002781 25.1397220008872,121.796412003099 25.1397939993309,121.79643300422 25.1398010002246,121.796687995514 25.1399190018597,121.79689700079 25.1400830025402,121.797130996482 25.1401550030855,121.797146001722 25.1401550035974,121.797420001465 25.1401149990423,121.797755004002 25.1399559970624,121.798028998382 25.1399290002631,121.799164002322 25.1399600038315,121.799559996766 25.1400160052625,121.799946996783 25.1401709971942,121.800205003666 25.1403249967116,121.800544996103 25.1402990019375,121.80095600366 25.1402449978762,121.801512999341 25.1400819976003,121.801918001225 25.139832999199,121.802158999577 25.139494999536,121.8023620024 25.1392070017514,121.802454996047 25.1389289973549,121.802531001504 25.1386420031098,121.80251499944 25.1384470023948,121.802452997682 25.1382909974724,121.802260003565 25.1379720035875,121.801969001053 25.137441002075,121.801886999222 25.1370970050768,121.801841998398 25.1368030014903,121.801854002369 25.1364650045969,121.801930997624 25.1362020007001,121.802079999923 25.1359570053299,121.802311995319 25.1357950029941,121.802666000638 25.1355040023634,121.803014001941 25.135339998281,121.803279997854 25.1352199963889,121.803588996263 25.1351139974156),(121.742224004562 25.1304189980955,121.738614002979 25.1323440003314,121.74146799769 25.1365390000123,121.741574001304 25.1367520023998,121.741540995651 25.1369439978165,121.741474996038 25.1372610028096,121.740752998438 25.1386940016834,121.740217999438 25.1396070046417,121.739580995763 25.1407910037261,121.738531004888 25.1429790017705,121.73852599717 25.143260998732,121.738631999297 25.1434950015195,121.738950999872 25.1442530033537,121.739021000385 25.1445000047563,121.73899000197 25.1447150011689,121.738358001609 25.147200000095,121.738195997571 25.1475659969492,121.738092002866 25.1478129990677,121.738004999341 25.1480850044905,121.737966995056 25.1482519990399,121.737850004434 25.1484359980782,121.737502003744 25.1488820034442,121.737375995656 25.1492639978397,121.737215001141 25.1497230011933,121.737006997539 25.1500309969067,121.736543998091 25.1504659987302,121.736428997484 25.1506220008391,121.73640399576 25.1508720034059,121.736456002075 25.151098999594,121.736660997911 25.1514740026483,121.73670299666 25.1517289983111,121.736639001156 25.151899001618,121.736361995733 25.152303999396,121.735854999408 25.1527610017607,121.735108997348 25.1532359985904,121.733903001457 25.1539320046251,121.733626004294 25.1541300008028,121.733460003745 25.1542709964481,121.73346000055 25.154370003461,121.734252999595 25.1568760047377,121.734310004365 25.1571710005698,121.734330998651 25.1573889970163,121.734267995959 25.1574739984267,121.734161998635 25.1574570011984,121.733889995923 25.1573619967173,121.733089997745 25.1573189972326,121.732802000538 25.1573889972663,121.732463000448 25.1575140021394,121.732200997615 25.1576600031706,121.731970004258 25.157877999978,121.731883998927 25.1580679981209,121.732216000295 25.1585979989861,121.732351998038 25.1589330039615,121.732293003266 25.159476998891,121.732089003704 25.1599670028363,121.732022002793 25.1600590015038,121.73198900395 25.1602089976138,121.732063996161 25.1603590014903),(121.742254996378 25.1304159991339,121.742833004294 25.1300660045644,121.742644001554 25.1296939979728,121.740947003065 25.1273170021215,121.741558998271 25.1269889967313,121.741658001657 25.1269260022834,121.74168000203 25.1268530022048,121.741027995451 25.1259729982639,121.742084004668 25.1249690026418,121.742147000933 25.124810999633,121.742113999088 25.1247009993216,121.741979999791 25.1245320027661,121.741947002254 25.1243570026308,121.742418001639 25.1208999968121,121.742637999787 25.1190559973343,121.742915997145 25.1176429983426,121.742953002379 25.1171230040138,121.742945996443 25.116758001986,121.742848996517 25.1161520036529,121.742611004405 25.115452001311,121.742158000402 25.1147790026384,121.742063003132 25.1145760015595,121.741698001442 25.1141339963877,121.741660000581 25.1140100006623,121.741574002151 25.1139489969395,121.739830996049 25.112778002139,121.739200003065 25.1122609967504,121.737516001848 25.1109779969791,121.737357000302 25.1108920038345,121.737022995931 25.1107499965183,121.736665996143 25.1107250032385,121.735543001049 25.1107989996237,121.734718004723 25.1107629974467,121.734397004092 25.1106809995293,121.733938998072 25.1104650028198,121.732721999656 25.1097510025166,121.732381003376 25.1095989982906,121.731228004505 25.1091100025249,121.731204003926 25.1090939972664),(121.733574997299 25.1102219979774,121.733849996913 25.1098900041297,121.733992003404 25.1096710007171,121.734081995749 25.1095069990873,121.734165997182 25.1092580035058,121.734317997337 25.1090590009888,121.734970999664 25.108400999611,121.735368001306 25.1081080031128,121.735660000857 25.1078680049568,121.736059000411 25.1073279968933,121.736407001346 25.1068189986581,121.736670998573 25.10631299888,121.736958998042 25.1057740002132,121.737122997298 25.105638003278,121.738321002355 25.104625004865,121.739531004689 25.104133002096,121.740349002633 25.1038059975438,121.740565996519 25.1036580052488,121.740644997484 25.1035099976659,121.740586003337 25.1033500041935,121.741695995892 25.1032279990681,121.743011996287 25.1030640037954,121.743562003718 25.1029990008839,121.743946003783 25.1029689988418,121.744623001547 25.1030619998955,121.745183003697 25.1031019969112,121.745562996816 25.1031470044576,121.745960001493 25.1032749989477,121.746150997402 25.1033109978328,121.746291004099 25.1032950003591,121.746478001418 25.1032079976102,121.747065004409 25.1021680047195,121.747284004802 25.1017810006574,121.747324004398 25.1016920020294))'
  },
  {
    RouteName: '外木山自行車與行人共用道',
    AuthorityName: '交通旅遊處觀光行政科',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '安樂區',
    RoadSectionStart: '外木山停車場',
    RoadSectionEnd: '大武崙澳精神堡壘',
    Direction: '雙向',
    CyclingLength: 1300.0,
    FinishedTime: '1020101',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.708247997312 25.1641940044033,121.71023499518 25.1638430023972,121.711256004948 25.1638220044194,121.712093995712 25.1640090031222,121.712404000584 25.1641639984865,121.712849995528 25.164610999525,121.71319799648 25.1647269999926,121.714649998247 25.1651650019904,121.715856003919 25.1649510050183,121.716244997085 25.1649550006442,121.717100996961 25.1646059976714,121.717862997833 25.1645000026026,121.718539001553 25.1640769971428,121.719542000762 25.1641260033118,121.720396002779 25.1637570038342,121.721457996412 25.1638489979182,121.722292001952 25.1639110053346,121.723698000979 25.1642420016771,121.724298995913 25.1643639972688,121.72470699724 25.164315002342,121.72479199572 25.1642810031338),(121.724788995985 25.1642820018406,121.725621996014 25.163590000343))'
  },
  {
    RouteName: '望海藍帶鐵馬景觀棧道串聯工程',
    AuthorityName: '觀光及城市行銷處',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '中正區',
    RoadSectionStart: '1.平浪橋前廣場、2.海科館休憩平台前廣場',
    RoadSectionEnd: '1.海巡署安檢所前方、2.八斗子車站前方棕櫚樹區',
    Direction: '雙向',
    CyclingLength: 380.3,
    FinishedTime: '1090215',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.801667995327 25.1399809972674,121.8018450024 25.1399079987564,121.801914999918 25.1398700017003,121.801973996444 25.1398210052991,121.802038000186 25.1397430030323,121.802155996271 25.1395590037351,121.802542995624 25.1388549995665,121.802622999949 25.1387139967296,121.80267099597 25.1385919989302),(121.803259998171 25.1374230038798,121.803238002748 25.1372139977357,121.803195001897 25.1370640018094,121.803136003954 25.1369230028657,121.803071997513 25.1368350052643,121.802883999805 25.136690001943,121.802770995583 25.1366510009392,121.802648001822 25.1366069984815,121.802599996007 25.1365589967336,121.802551004831 25.1364709988039,121.802534996152 25.1363250001338,121.802550999158 25.1361940035451,121.802594003716 25.1360580038201,121.802652997597 25.1359270000317,121.802750001679 25.1357820050764,121.802904998659 25.1356699988088,121.803076997407 25.1355479969061))'
  },
  {
    RouteName: '環島1號線(台5線路段)',
    AuthorityName: '公路總局第一區養護工程處基隆工務段',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '七堵區',
    RoadSectionStart: '明德二路中油加油站',
    RoadSectionEnd: '新北市基隆市界',
    Direction: '雙向',
    CyclingLength: 2000.0,
    FinishedTime: '1051231',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.688885996593 25.0716609969045,121.692877000506 25.0777059978369,121.695065996455 25.0794450006831,121.698434999503 25.0804310052521,121.70007599692 25.080963003441,121.702067002725 25.080617003736,121.704957997528 25.0843130020046))'
  },
  {
    RouteName: '環島1路線編號055',
    AuthorityName: '交通處交通工程科',
    CityCode: 'KEE',
    City: '基隆市',
    Town: '暖暖區、七堵區',
    RoadSectionStart: '東勢街',
    RoadSectionEnd: '明德二路',
    Direction: '雙向',
    CyclingLength: 9100.0,
    FinishedTime: '1060228',
    UpdateTime: '2022-05-08T00:00:10+08:00',
    Geometry:
      'MULTILINESTRING ((121.741369000226 25.0899390023122,121.741327998379 25.0901020052505,121.740821003236 25.0909359967213,121.740310998552 25.0913829984005,121.739969995213 25.0916480039903,121.739529997474 25.0923180012779,121.739097999115 25.09294900254,121.739006996785 25.0932619978104,121.739136996061 25.0940720000852,121.73891499562 25.0974770042302,121.738832997307 25.0977809988632,121.738620000252 25.0982300000082,121.738456999735 25.0984000012013,121.737531001517 25.0988800022245,121.736408999844 25.0998750036215,121.736104995822 25.1005360010411,121.735965002929 25.1008920020879,121.735999002752 25.1024529981754,121.735998001439 25.1026170017593,121.735744996823 25.1032510049878,121.734085995211 25.1067230034317,121.733733997753 25.1072700050438,121.732338999211 25.1084400033266,121.731655004847 25.1088659970242,121.731286000067 25.1090669970877,121.731151997144 25.1090820030127,121.730950999789 25.109028998801,121.730055003571 25.1086640051054,121.72891799969 25.1080670031889,121.727332000681 25.10702500392,121.72680299978 25.1065390047941,121.72653200318 25.1061830039175,121.72640399732 25.1058550015041,121.7263409999 25.104045996984,121.726181000533 25.103480999921,121.72556300143 25.1026800005088,121.723580998788 25.1014599984811,121.722346997653 25.10050300028,121.721764997853 25.1003270018678,121.720298996811 25.1001860002496,121.718901001747 25.099910997857,121.718420999129 25.0997129965802,121.716635999271 25.0987920021383,121.715753997406 25.0983790044863,121.713823997322 25.0976640035083,121.711547003851 25.0968120016456,121.711300998731 25.0966739996222,121.710959003456 25.0963830024281,121.710706000694 25.0960459966164,121.710656002795 25.0958090031356,121.710488001961 25.0927369995463,121.710343998416 25.0925609965719,121.710208999078 25.0924299991801,121.708433000369 25.0912200048104,121.708110996896 25.0909209966242,121.707660997542 25.0904509972924,121.707456998641 25.0903189992689,121.706923999077 25.0902219989579,121.706401999383 25.0902069982972,121.706192996896 25.090165002715,121.705935000599 25.0899760050549,121.70539999763 25.0893509979069,121.705301004881 25.0889919982516,121.705210996173 25.087162998593,121.705273998742 25.0856500038796,121.705258003012 25.085200999144,121.705141999001 25.0845800018104,121.70491500343 25.0841449995392,121.704653995293 25.0837650025117,121.702384001173 25.0810329965734,121.70217100137 25.080826002916,121.70199299792 25.0807030009965,121.701712003388 25.0806709990602,121.700388996685 25.0809560015662,121.70001699729 25.0809250036633,121.695183004669 25.0794989989679,121.69463600293 25.0792839978094,121.694135997456 25.0790369967389,121.693798001381 25.0787659989803,121.693570998286 25.0785810047938,121.691413996607 25.0756470010207,121.690312004063 25.0739990009991,121.689116996539 25.0719579980642,121.689100998765 25.0719510035028))'
  }
];
describe('RoadSearch', () => {
  const wrapper = mount(RoadSearch);
  const city = 'Keelung';
  const road = '環島1號線(台5線路段)';

  it('select city', async () => {
    await wrapper.get('[data-test="city"]').setValue(city);
    expect(wrapper.vm.selectedCity).toBe(city);
  });
  it('fetch Road API data', async () => {
    const spy = vi
      .spyOn(tdxService, 'getCyclingData')
      .mockImplementation(() => Promise.resolve({ data: mockRoadData }));
    const res = await tdxService.getCyclingData();
    expect(res.data).toEqual(mockRoadData);
    expect(spy.mock.results[0].value.data).toEqual(mockRoadData);
  });
  it('change city', async () => {
    const changeCitySpy = vi.spyOn(wrapper.vm, 'changeCity');
    expect(changeCitySpy).not.toHaveBeenCalled();
    await wrapper.vm.changeCity();
    expect(changeCitySpy).toHaveBeenCalled();
  });
  it('select road', async () => {
    await wrapper.get('[data-test="road"]').setValue(road);
    expect(wrapper.vm.selectedRoad).toBe(road);
  });
  it('reset selectedRoad', () => {
    const resetSpy = vi.spyOn(wrapper.vm, 'resetSelectedRoad');
    expect(resetSpy).not.toHaveBeenCalled();
    wrapper.vm.resetSelectedRoad();
    expect(resetSpy).toHaveBeenCalled();
    expect(wrapper.vm.selectedRoad).toBe('');
  });
  it('trigger submit', async () => {
    const submitSpy = vi.spyOn(wrapper.vm, 'submit');
    await wrapper.get('[data-test="road"]').setValue(road);
    wrapper.vm.submit();
    expect(submitSpy).toHaveBeenCalled();
  });
});
